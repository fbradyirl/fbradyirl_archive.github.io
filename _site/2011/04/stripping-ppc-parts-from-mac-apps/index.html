
<!-- Post Layout Start -->

<!DOCTYPE html>
<html lang="en">

  
<!-- HEAD Start -->

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Ramblings of a Cavan man">
  <meta name="author" content="Finbarr Brady">
  <meta name="keywords" content="brady, finbarr, personal, jekyll, theme">
  <link rel="canonical" href="/2011/04/stripping-ppc-parts-from-mac-apps/">
  
  
  <title>{ Finbarr Brady }  | Stripping PowerPC parts from your Mac app</title>

  <!-- Bootstrap Core CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

  <!-- Custom CSS -->
  <link href="/css/grayscale.css" rel="stylesheet">
  <link href="/css/timeline.css" rel="stylesheet">

  <!-- Custom Fonts -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
  
    <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico">
  
</head>

<!-- HEAD End -->


  <body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">

    
<!-- Navigation Start -->

<nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
                <i class="fa fa-bars"></i>
            </button>
            
              <a class="navbar-brand page-scroll" href="/index.html#page-top">
            
            <div><img src="/img/black-lab-glass.ico" alt="">  { Finbarr Brady }</div>
          </a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
            <ul class="nav navbar-nav">
                <!-- Hidden li included to remove active class from about link when scrolled up past about section -->
                <li class="hidden">
                    <a href="#page-top"></a>
                </li>

                
                  <!-- Blog, Post, Tag pages-->
                  
                    
                      <li>
                        <a class="page-scroll" href="/index.html#about"> About </a>
                      </li>
                    
                  
                    
                      <li>
                        <a class="page-scroll" href="/blog/index.html"> Blog </a>
                      </li>
                    
                  
                    
                      <li>
                        <a class="page-scroll" href="/index.html#career"> Career </a>
                      </li>
                    
                  
                    
                      <li>
                        <a class="page-scroll" href="/index.html#contact"> Contact </a>
                      </li>
                    
                  
                
            </ul>
        </div>
    </div>
</nav>

<!-- Navigation End -->


    <section id="Stripping PowerPC parts from your Mac app" class="container content-section text-center">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2">

          <h1><strong>Stripping PowerPC parts from your Mac app</strong></h1>
          <h4><strong>27 Apr 2011</strong>
            <small> .  . <a href="/2011/04/stripping-ppc-parts-from-mac-apps/#disqus_thread">Comments</a>
            
              <a href="/tags/featured.html">#featured</a>
            
            </small>
          </h4>

          <p><img class="alignright size-full wp-image-667" title="stevex64" src="http://finbarrbrady.com/wp-content/uploads/2011/04/stevex64.jpeg" alt="" width="264" height="175" />If you are a developer with an app in the Mac App Store, then you have probably come across this Apple rule:</p>

<blockquote>
  <p>Application executables may support either or both of the Intel architectures:</p>

  <p>i386 (32-bit)<br />
x86_64 (64-bit)</p>

  <p>Other architectures may not be included in submitted binaries.</p>
</blockquote>

<p>No problem says you. However, until recently, Apple did not check things like dylibs contained within your app bundle. They do now.</p>

<p>This means that you must make sure that any 3rd party components you have imported to your project are stripped of any old PPC remnants or they will fail validation and be rejected within 5 minutes of submission (seems like they have automated these checks).</p>

<p>So how do we do this? Simple enough, but it requires and extra step after building the archive.</p>

<ol>
  <li>First to be safe, you should check your target build settings to ensure that your target architectures are set to i386 and x86_64.  So first click on the Project in XCode, then select the target:<br />
    <img class="aligncenter size-full wp-image-644" title="Select target" src="http://finbarrbrady.com/wp-content/uploads/2011/04/Screen-shot-2011-04-27-at-21.55.21.png" alt="" width="442" height="55" /> Then, under the ‘Build Settings’ tab look at the ‘Valid Architectures’ and check that it looks like this:<img class="aligncenter size-full wp-image-645" title="Arch" src="http://finbarrbrady.com/wp-content/uploads/2011/04/Screen-shot-2011-04-27-at-22.08.30.png" alt="" width="402" height="175" /></li>
  <li>Then, as normal, build the product for Archive<img class="aligncenter size-full wp-image-646" title="Screen shot 2011-04-27 at 22.10.08" src="http://finbarrbrady.com/wp-content/uploads/2011/04/Screen-shot-2011-04-27-at-22.10.08.png" alt="" width="272" height="128" /></li>
  <li>The Organser window should open automatically when done. At this point, we’re interested in finding the .app bundle. Where is it? Lets see… Right click on the archive, and select ‘Show In Finder’<img class="aligncenter size-full wp-image-647" title="Screen shot 2011-04-27 at 22.12.25" src="http://finbarrbrady.com/wp-content/uploads/2011/04/Screen-shot-2011-04-27-at-22.12.25.png" alt="" width="497" height="134" /></li>
  <li>The xcarchive location will be shown. Right click and ‘Show Package Contents’<img class="aligncenter size-full wp-image-648" title="Screen shot 2011-04-27 at 22.13.59" src="http://finbarrbrady.com/wp-content/uploads/2011/04/Screen-shot-2011-04-27-at-22.13.59.png" alt="" width="392" height="114" /></li>
  <li>Inside here, browse to Products/Users/NAME/Applications/ to see your .app bundle<img class="aligncenter size-full wp-image-649" title="Screen shot 2011-04-27 at 22.17.25" src="http://finbarrbrady.com/wp-content/uploads/2011/04/Screen-shot-2011-04-27-at-22.17.25.png" alt="" width="411" height="165" />This is the .app bundle we need to strip non x86 or 64 parts from before signing and submitting to Apple. To do this we can use something like <a href="http://homepage.mac.com/gweston/macware/TrimTheFat.zip" title="Trim The Fat">TrimTheFat</a>, by dragging the .app bundle into it’s window and deleting the resulting Jelly SMS Lite-U.app (as it’s not needed any more).Or alternatively, we can run the following command on the .app bundle.</li>
</ol>

<pre>ditto --rsrc  --arch i386 --arch x86_64 MyApp.app build/MyApp.app</pre>

<p>(from <a href="https://devforums.apple.com/message/418977#418977">Apple Dev Forums</a>)</p>

<p>If anyone knows of a way this command can be automatically run during the archive or build process (possibly during a build step maybe??), please let us know in the comments below…</p>

<p><strong><span style="color: #ff0000;">[Update]</span> Important</strong>: <em>I forgot to mention – you should launch your .app at this stage to test if you’ve actually stripped out something that your app depends on. If so, you will get a crash here. In this case you will need to look at your project more closely and remove the code/parts causing the exceptions.</em></p>

<p>Now you can simply submit your archive as before and the nasty stuff should all be gone from it and you will once again be in Apple’s good books.</p>



          
<!-- Share Buttons Start -->

<div>

  
    <div style="float:left; padding: 0 5px; vertical-align:top">
      <div class="fb-share-button" data-href="http://finbarrbrady.com/2011/04/stripping-ppc-parts-from-mac-apps/" data-layout="button_count"></div>
    </div>
  

  
    <div style="float:left; padding: 0 5px; vertical-align:top">
      <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://finbarrbrady.com/2011/04/stripping-ppc-parts-from-mac-apps/" data-text="Stripping PowerPC parts from your Mac app #featured "></a>
  </div>
  

  

</div>

<!-- Share Buttons End -->


          
<!-- Disqus Comments Start -->


  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


<!-- Disqus Comments End -->


        </div>
      </div>
    </section>

    <section id="Stripping PowerPC parts from your Mac app" class="container content-section text-center">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2">
          
<!-- Social Buttons Start -->

<ul class="list-inline social-buttons">
  
    <li><a href="http://facebook.com/finbarrbrady" target="_blank"><i class="fa fa-facebook fa-fw"></i></a></li>
  
    <li><a href="http://twitter.com/finbarrbrady" target="_blank"><i class="fa fa-twitter fa-fw"></i></a></li>
  
    <li><a href="https://github.com/fbradyirl" target="_blank"><i class="fa fa-github fa-fw"></i></a></li>
  
    <li><a href="/feed.xml" target="_blank"><i class="fa fa-rss fa-fw"></i></a></li>
  
</ul>

<!-- Social Buttons End -->

        </div>
      </div>
    </section>

    
 <!-- Footer Start -->

<footer>
    <div class="container text-center">
        <p>Copyright &copy; Finbarr Brady 2015</p>
    </div>
</footer>

<p><br><br><br><br><br><br></p>

<!-- Footer End -->


    
<!-- Javascript Start -->

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

<!-- Plugin JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/grayscale.js"></script>






  <!-- Disqus -->

  

  







<!-- Javascript End -->


  </body>
</html>

<!-- Post Layout End -->
